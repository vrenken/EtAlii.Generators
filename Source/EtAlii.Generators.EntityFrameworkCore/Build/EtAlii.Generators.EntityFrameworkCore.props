<Project>

  <PropertyGroup>
    <GeneratedCodePath>.etalii\generated</GeneratedCodePath>
    <IncludePackageReferencesDuringMarkupCompilation>true</IncludePackageReferencesDuringMarkupCompilation>
    <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
    <CompilerGeneratedFilesOutputPath>$(GeneratedCodePath)</CompilerGeneratedFilesOutputPath>
  </PropertyGroup>

  <Target Name="CleanSourceGeneratedFiles" AfterTargets="Clean">
    <RemoveDir Directories="$(GeneratedCodePath)" />
  </Target>
  <Target Name="RemoveSourceGeneratedFiles" BeforeTargets="BeforeBuild">
    <ItemGroup>
      <Compile Remove="$(GeneratedCodePath)\**" />
    </ItemGroup>
  </Target>
  <Target Name="AddSourceGeneratedFiles" AfterTargets="AfterBuild">
    <ItemGroup>
      <Compile Include="$(GeneratedCodePath)\**" Visible="False" />
    </ItemGroup>
  </Target>

  <!-- ===================================================== -->

  <Target Name="_InjectAdditionalFiles" BeforeTargets="GenerateMSBuildEditorConfigFileShouldRun">
    <ItemGroup>
      <AdditionalFiles Include="@(EfCoreModel)" SourceItemGroup="EfCoreModel" />
    </ItemGroup>
  </Target>

  <ItemGroup>
    <CompilerVisibleItemMetadata Include="AdditionalFiles" MetadataName="SourceItemGroup" />
  </ItemGroup>

  <!-- ===================================================== -->

</Project>
